# tools
CC := gcc -m32
RM := rm -f

# flags
CFLAGS := -O0 -ggdb -fno-stack-protector -mpreferred-stack-boundary=2 -z execstack
LDFLAGS := -ggdb -fno-stack-protector -z execstack
LDLIBS :=
MODERNCFLAGS := -fcf-protection=none -mno-shstk -fno-pic -fno-pie -fno-inline-small-functions
MODERNLDFLAGS := -no-pie
CFLAGS += $(MODERNCFLAGS)
LDFLAGS += $(MODERNLDFLAGS)
# sources
sources := printftoy2.c printftoy1.c printftoy3.c printftoy3_internals.c
targets := printftoy1 printftoy2 printftoy3 printftoy3_internals

# gmake magic
.PHONY: default all clean

#targets
default: all
all: $(targets)

clean:
	$(RM) $(targets) $(sources:.c=.o)

